<!DOCTYPE html>
<html lang="ko">

{% include "./head.ejs" %}

<body>
  <div class="container">
    {% include "./navbar.ejs" %}
    
      <div>
        <div class>
          {% if user and user.id %}
          <div>{{'안녕하세요! ' + user.nick + '님'}}</div>
          <div>{{user.floor + '층 잘 부탁드립니다!'}}</div>
          <input id="my-id" type="hidden" value="{{user.id}}">

          {% else %}
          <form id="login-form" action="/auth/login" method="post">
            <div class="form-group">
              <label class="form-label mt-4">Please log in</label>
              <div class="form-floating mb-3">
                <input type="uid" class="form-control" id="uid" name="uid" placeholder="Your Id">
                <label for="floatingInput">Id</label>
              </div>
              <div class="form-floating">
                <input type="password" class="form-control" id="password" name="password" placeholder="Password">
                <label for="floatingPassword">Password</label>
              </div>
            </div>
            <button id="login" type="submit" class="btn btn-primary">로그인</button>
          </form>
          
          {% endif %}
        </div>
        {% include "./footer.ejs" %}
      </div>
    
    {% block content %}
    {% endblock %}
  </div>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
  <script src="main.js"></script>
  <script>
    window.onload = () => {
      if (new URL(location.href).searchParams.get('loginError')) {
        alert(new URL(location.href).searchParams.get('loginError'));
      }
    };
  </script>
  {% block script %}
  {% endblock %}
</body>

</html>